{"generator":"Code Snippets v3.6.8","date_created":"2025-06-13 05:53","snippets":[{"id":63,"name":"disable enter on search field and quick view variations flash fixer","code":"add_action('wp_footer', function(){?>\n<style>\n\t.woosq-product form.variations_form {\n\t\tvisibility: hidden;\n\t\topacity: 0;\n\t\ttransition: all .2s ease-in-out\n\t}\n\t.woosq-product form.variations_form.fv-visible {\n\t  visibility: visible !important;\n\t  opacity: 1 !important;\n\t}\n\t\n\t.summary table.variations tr {\n\t\tborder-bottom: 0 !important\n\t}\n<\/style>\n<script>\njQuery(document).ready(function($) {\n  \/\/ 1) Remove the data-goto-on-enter attribute (to disable the plugin's automatic redirection function)\n  $('.uc-ajax-search__items')\n    .removeAttr('data-goto-on-enter')\n    .data('goto-on-enter', false);\n\n  \/\/ 2) Prevent the Enter key from being pressed on the input (preventDefault + stopImmediatePropagation)\n  $('.uc-ajax-search__input').on('keydown', function(e) {\n    if (e.key === 'Enter' || e.keyCode === 13) {\n      e.preventDefault();\n      e.stopImmediatePropagation();\n      return false;\n    }\n  });\n\n  \/\/ 3) Do nothing when the search button is clicked (preventDefault + stopImmediatePropagation)\n  $('.uc-ajax-search__btn').on('click', function(e) {\n    e.preventDefault();\n    e.stopImmediatePropagation();\n    return false;\n  });\n\t\n\t\n\tvar modalSelector = '.woosq-product';\n\n    \/\/ ------------------------------------------------------\n    \/\/ 2) listen AJAX Complete event\n    \/\/ ------------------------------------------------------\n    $(document).ajaxComplete(function(event, xhr, settings) {\n      \/\/ if AJAX is \u201cwc-ajax=woosq_quickview\u201d\n      if ( typeof settings.url === 'string' && settings.url.indexOf('wc-ajax=woosq_quickview') !== -1 ) {\n        setTimeout(function() {\n          \/\/ if quick view is still active and if has \n          var $form = $(modalSelector).find('form.variations_form');\n          if ( $form.length ) {\n            \/\/ add \u201cfv-visible\u201d classname\n            $form.addClass('fv-visible');\n          }\n        }, 600);\n      }\n    });\n\n    \/\/ ------------------------------------------------------\n    \/\/ 3) remove class fv-visible when quick view closed\n    \/\/ ------------------------------------------------------\n    \/\/ observe removed elements when quick view is closed \n    var closeObserver = new MutationObserver(function(mutationsList) {\n      mutationsList.forEach(function(mutation) {\n        Array.from(mutation.removedNodes).forEach(function(node) {\n          \/\/ if quickview modal is closed\n          if ( node.nodeType === 1 && $(node).is(modalSelector) ) {\n            \/\/ remove form.variations_form.fv-visible if has inside\n            $(node).find('form.variations_form.fv-visible').removeClass('fv-visible');\n          }\n        });\n      });\n    });\n    \/\/ Observe all body dom removes \n    closeObserver.observe(document.body, {\n      childList: true,\n      subtree: true\n    });\n\t\n});\n<\/script>\n  <?php\n});\n","active":true,"modified":"2025-06-08 17:44:38","revision":"4"}]}