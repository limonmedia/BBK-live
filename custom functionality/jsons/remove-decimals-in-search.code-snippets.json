{"generator":"Code Snippets v3.6.8","date_created":"2025-06-13 05:53","snippets":[{"id":61,"name":"remove decimals in search","code":"\/**\n * 1) Hide all price decimals on initial paint\n * 2) Trim \u201c,00\u201d or \u201c.00\u201d via JavaScript and reveal the cleaned prices\n *\/\n\n\/*-----------------------------------\n * 1) Output CSS in the <head> to hide all <bdi> inside .woocommerce-Price-amount\n *----------------------------------*\/\nadd_action('wp_head', function() {\n    echo '<style>\n        \/* Hide every .woocommerce-Price-amount bdi until JS cleans it *\/\n        .woocommerce-Price-amount bdi {\n            visibility: hidden;\n        }\n    <\/style>';\n});\n\n\n\/*-----------------------------------\n * 2) Output JS in the <footer> to strip decimals and reveal cleaned prices\n *----------------------------------*\/\nadd_action('wp_footer', function() {\n    ?>\n    <script>\n    document.addEventListener('DOMContentLoaded', function () {\n        function trimPriceDecimals() {\n            document.querySelectorAll('.woocommerce-Price-amount bdi').forEach(function (el) {\n                \/\/ 1) Grab any nested currency symbol\n                const currencySpan = el.querySelector('.woocommerce-Price-currencySymbol');\n                \/\/ 2) Get the \u201c299,00\u201d or \u201c299.00\u201d text\n                const rawText = el.cloneNode(true).childNodes[0]?.nodeValue || '';\n                \/\/ 3) Remove exactly \u201c,00\u201d or \u201c.00\u201d at the end\n                const cleaned = rawText.replace(\/([.,])\\d{2}$\/, '');\n                \/\/ 4) Rewrite the <bdi> to \u201c299\u201d + \u201c<span class='woocommerce-Price-currencySymbol'>kr<\/span>\u201d\n                el.innerHTML = cleaned + (currencySpan ? currencySpan.outerHTML : '');\n                \/\/ 5) Reveal the cleaned price\n                el.style.visibility = 'visible';\n            });\n        }\n\n        \/\/ Run once immediately on page load\n        trimPriceDecimals();\n\n        \/\/ Re-run every second in case live-search\/AJAX injects new prices\n        setInterval(trimPriceDecimals, 1000);\n    });\n    <\/script>\n    <?php\n});\n","active":true,"modified":"2025-06-03 13:35:34","revision":"42"}]}