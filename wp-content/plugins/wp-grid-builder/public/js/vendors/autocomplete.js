/*!
* WP Grid Builder
*
* @package   WP Grid Builder
* @author    Loïc Blascos
* @link      https://www.wpgridbuilder.com
* @copyright 2019-2025 Loïc Blascos
*
*/
(()=>{var e={581:()=>{[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(e){e.hasOwnProperty("after")||Object.defineProperty(e,"after",{configurable:!0,enumerable:!0,writable:!0,value:function(){const e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach((function(e){const s=e instanceof Node;t.appendChild(s?e:document.createTextNode(String(e)))})),this.parentNode.insertBefore(t,this.nextSibling)}})}))},855:()=>{[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(e){e.hasOwnProperty("append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){const e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach((function(e){const s=e instanceof Node;t.appendChild(s?e:document.createTextNode(String(e)))})),this.appendChild(t)}})}))},152:()=>{[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(e){e.hasOwnProperty("before")||Object.defineProperty(e,"before",{configurable:!0,enumerable:!0,writable:!0,value:function(){const e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach((function(e){const s=e instanceof Node;t.appendChild(s?e:document.createTextNode(String(e)))})),this.parentNode.insertBefore(t,this)}})}))},984:()=>{Element.prototype.closest||(Element.prototype.closest=function(e){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null})},366:()=>{Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector)},555:()=>{window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var s=0;s<this.length;s++)e.call(t,this[s],s,this)})},599:()=>{[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})}))}},t={};function s(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,s),o.exports}s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};s.r(e),s.d(e,{Clear:()=>a,Input:()=>n,List:()=>l,Loader:()=>r,Menu:()=>h,Message:()=>c});s(581),s(152),s(855),s(599),s(366),s(984),s(555);const t=new class{count=0;instances="undefined"!=typeof Map&&new Map;add(e,t){!this.has(e)&&this.instances.set(e,{id:++this.count,instance:t})}get(e){return this.has(e)&&this.instances.get(e).instance}id(e){return this.has(e)&&this.instances.get(e).id}has(e){return this.instances.has(e)}remove(e){this.instances.delete(e)}};class i{prefix="_acplt";constructor(e){let{element:s}=e;this.input=s,this.suffix=t.id(s)}get instance(){return t.get(this.input)}get components(){return this.instance.components}get options(){return this.instance.options}get classes(){return this.options.classes}get id(){return this.prefix+this.suffix}get items(){return this.instance.items||[]}get item(){return this.items[this.index]||{}}get index(){return this.instance.index}}class n extends i{init(){this.attributes(),this.wrapper(),this.label(),this.wrap()}destroy(){this.collapse(),this.attributes("remove"),this.element.before(this.input),this.element.remove(),this.label.id===`${this.id}l`&&this.label.removeAttribute("id")}attributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"set";e=`${e}Attribute`,this.input[e]("autocomplete","off"),this.input[e]("aria-autocomplete",this.options.autoComplete?"both":"list")}wrapper(){this.element=document.createElement("div"),this.element.className=this.classes.wrapper,this.element.setAttribute("role","combobox"),this.element.setAttribute("aria-haspopup","listbox"),this.element.setAttribute("aria-expanded",!1)}label(){this.label=document.querySelector(`label[for="${this.input.id}"]`),this.label||(this.label=this.input.closest("label")||{}),this.label.id||(this.label.id=`${this.id}l`)}wrap(){this.input.before(this.element),this.element.append(this.input)}expand(){this.element.setAttribute("aria-owns",this.id),this.element.setAttribute("aria-expanded",!0),this.input.setAttribute("aria-controls",this.id),this.setDescendant()}collapse(){this.element.removeAttribute("aria-owns"),this.element.setAttribute("aria-expanded",!1),this.input.removeAttribute("aria-activedescendant"),this.input.removeAttribute("aria-controls")}setDescendant(){const e=this.index,t=0===e||e>0?`${this.id}-${e}`:"",s=""!==t?"set":"remove";this.input[`${s}Attribute`]("aria-activedescendant",t)}}class o extends i{createItem(){this.node=document.createElement("li"),this.node.id=`${this.id}-`,this.node.className=this.classes.item,this.node.setAttribute("role","option"),this.node.setAttribute("aria-selected",!1)}cloneItem(e){const t=this.node.cloneNode(!1);return t.id+=e,t._index=e,t}addItem(e,t){const s=this.cloneItem(t);null!==(e=this.options.renderItem(e,s,t))&&("string"==typeof e?s.textContent=e:s.append(e),this.list.append(s))}getItem(){return this.element.children[this.index]}focusItem(){this.setSelected(!0)}blurItem(){this.setSelected(!1)}setSelected(e){const t=this.getItem();t&&t.setAttribute("aria-selected",e)}}class l extends o{init(){this.element=document.createElement("ul"),this.element.id=this.id,this.element.className=this.classes.list,this.element.setAttribute("aria-labelledby",this.components.Input.label.id),this.element.setAttribute("role","listbox")}destroy(){this.depopulate(),this.element.remove()}populate(){this.list=document.createDocumentFragment(),this.depopulate(),this.createItem(),this.items.forEach(this.addItem,this),this.element.append(this.list)}depopulate(){for(;this.element.firstChild;)this.element.firstChild.remove()}}class h extends i{init(){this.element=document.createElement("div"),this.element.className=this.classes.menu,this.element.append(this.components.List.element),this.options.menuTarget instanceof HTMLElement||(this.options.menuTarget=document.body)}destroy(){this.remove()}append(){this.options.menuTarget.append(this.element),this.resize()}remove(){this.element.remove(),this.element.removeAttribute("style")}scroll(){const e=this.components.List.getItem();if(!e)return;const t=e.getBoundingClientRect(),s=this.element.getBoundingClientRect(),i=t.top-s.top+t.height;i>s.height?this.element.scrollTop+=i-s.height:i<t.height&&(this.element.scrollTop+=i-t.height)}resize=()=>requestAnimationFrame((()=>{const e=this.input.getBoundingClientRect(),t=this.target(),{style:s}=this.element;s.top=`${e.bottom-t.top+(t.top?0:window.pageYOffset)}px`,s.left=e.left-t.left+"px",s.width=`${e.width}px`,this.instance.emitEvent("onResize",this.element)}));target(){const{menuTarget:e}=this.options;return e===document.body?{top:0,bottom:0,left:0}:e.getBoundingClientRect()}}class a extends i{init(){this.button(),this.label(),this.icon()}destroy(){this.remove()}button(){this.element=document.createElement("button"),this.element.className=this.classes.clear,this.element.type="button"}label(){const e=document.createElement("span");e.textContent=this.options.clearLabel,this.element.append(e)}icon(){const e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg"),s=document.createElementNS(e,"path");s.setAttribute("d",this.options.clearShape),t.setAttribute("viewBox","0 0 24 24"),t.setAttribute("aria-hidden",!0),t.setAttribute("focusable",!1),t.appendChild(s),this.element.append(t)}append(){!this.element.parentNode&&this.input.after(this.element)}remove(){this.element.remove()}}class r extends i{init(){this.element=document.createElement("div"),this.element.className=this.classes.loader,[1,2,3].forEach((()=>this.element.appendChild(document.createElement("span"))))}destroy(){this.remove()}append(){!this.element.parentNode&&this.input.after(this.element)}remove(){this.element.remove()}}class c extends i{init(){this.element=document.createElement("span"),this.element.className=this.classes.message,this.element.setAttribute("role","status"),this.element.setAttribute("aria-atomic",!0),this.element.setAttribute("aria-live","polite"),this.input.before(this.element)}destroy(){this.remove()}remove(){this.element.remove()}set(e){this.element.textContent=this.options.messages[e].replace("%s",this.item.label)}}const p="acplt",m={source:[],minLength:1,maxResults:-1,regExp:"($1)",filterResults:e=>e,sortResults:(e,t)=>e.index-t.index||e.label.localeCompare(t.label)||e.label.length-t.label.length,highlighter:document.createElement("mark"),renderItem:e=>e.content,menuTarget:!1,smartAccent:!1,matchAll:!1,autoFocus:!0,autoSearch:!1,autoComplete:!1,loader:!1,clearable:!0,clearLabel:"Clear field",clearShape:"m12 12-4.25 4.75L12.001 12 7.75 7.25 12.001 12l4.249-4.75L12 12l4.25 4.75Z",classes:{wrapper:p,menu:`${p}-menu`,list:`${p}-list`,item:`${p}-item`,clear:`${p}-clear`,loader:`${p}-loader`,message:`${p}-message`},messages:{open:"Use Up and Down to choose suggestions and press Enter to select suggestion.",input:"Type to search or press Escape to clear the input.",clear:"Field cleared.",select:"%s suggestion was selected.",noResults:"No suggestions found.",loading:"Loading suggestions..."}};class d{emitEvent(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];this.options[e]&&this.options[e].apply(this,s)}addEvents(){this.handleEvents("add")}removeEvents(){this.handleEvents("remove")}handleEvent(e){this[`on${e.type}`](e)}handleEvents(e){e+="EventListener",this.components.Clear.element[e]("click",this),this.components.List.element[e]("click",this),this.components.List.element[e]("mouseenter",this,!0),this.element[e]("keydown",this),this.element[e]("keyup",this),this.element[e]("input",this),this.element[e]("focus",this),this.element[e]("blur",this),window[e]("mousedown",this),window[e]("resize",this)}onclick(e){let{target:t}=e;if(t===this.components.Clear.element)return this.clear(),void this.element.focus();const s=t.closest("li"),i=s&&s._index;(0===i||i>0)&&this.select(i)}onkeydown(e){const{autoComplete:t}=this.options;switch(e.key){case"Enter":this.select(this.index);break;case"Esc":case"Escape":this.clear();break;case"Down":case"ArrowDown":this.highlight(null===this.index?0:this.index+1),t&&this.replace();break;case"Up":case"ArrowUp":this.highlight(null===this.index?-1:this.index-1),t&&this.replace();break;default:return}e.preventDefault()}onkeyup(e){let{key:t}=e;this.options.autoComplete&&1===[...t].length&&this.complete()}onmousedown(e){const{List:t,Clear:s}=this.components,i=e.target.closest("ul")===t.element,n=e.target===s.element;(i||n)&&e.preventDefault()}onmouseenter(e){let{target:{_index:t}}=e;t>=0&&this.index!==t&&this.highlight(t,!1)}onresize(){this.opened&&this.components.Menu.resize()}oninput(){this.search(this.element.value)}onfocus(){this.components.Message.set("input"),this.options.autoSearch&&this.oninput()}onblur(){this.abort(),this.close(),this.update()}}class u{constructor(e){this.options=e}parse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.string=e.trim(),this.accent=this.hasAccent(),this.regExp=this.getRegEx(this.string,this.options.regExp),this.filter(t),this.sort(),this.slice(),this.highlight(),this.data}hasAccent(){return this.accent=!1,this.options.smartAccent&&this.normalize(this.string)!==this.string.toLowerCase()}filter(e){this.data=e.reduce(((e,t)=>(t=this.toObject(t),this.exists(t)&&e.push(t),e)),[])}toObject(e){return"object"==typeof e?{...e}:{value:e,label:e}}exists(e){const t=!this.string||this.normalize(e.label).match(this.regExp),s=this.options.filterResults.apply(this,[!!t,e,this.string]);return s&&(e.index=t?t.index:null,e.content=e.label),s}sort(){const{sortResults:e}=this.options;this.string&&"function"==typeof e&&this.data.sort(e)}slice(){const{maxResults:e}=this.options;e>0&&(this.data=this.data.slice(0,e))}highlight(){const{highlighter:e,matchAll:t}=this.options,{length:s}=this.string;if(!e||!s)return;const i=t&&this.getRegEx(this.string,"($1)","gi");this.data.forEach((e=>{if(null===e.index)return;const t=i?this.matchAll(e.label,i):[e.index],n=document.createDocumentFragment();e.content=this.wrapAll(e.label,t,s,n)}))}matchAll(e,t){const s=[];let i;for(e=this.normalize(e);null!==(i=t.exec(e));)s.push(i.index);return s}wrapAll(e,t,s,i){const n=t.shift(),o=e.slice(0,n),l=e.slice(n+s),h=e.slice(n,n+s);return o&&i.append(document.createTextNode(o)),h&&i.append(this.wrapMatch(h)),t.length?this.wrapAll(l,t.map((e=>e-(n+s))),s,i):i.append(document.createTextNode(l)),i}wrapMatch(e){const t=this.options.highlighter.cloneNode(!1);return t.textContent=e,t}getRegEx(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"i";return e=(e=this.normalize(e)).replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&"),new RegExp(t.replace("$1",e),s)}normalize(e){return!this.accent&&String.prototype.normalize&&(e=(e=e.normalize("NFD")).replace(/[\u0300-\u036f]/g,"")),e.trim().toLowerCase()}}class g extends d{components={};constructor(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(super(),this.element=e,this.options={...m,...s},t.has(e))return t.get(e);t.add(e,this),this.create()}create(){this.Data=new u(this.options),this.items=[],this.index=null,this.opened=!1,this.loading=!1;for(const t in e)this.components[t]=new e[t](this),this.components[t].init();this.update(),this.addEvents()}destroy(){const{element:e,components:s}=this,i=document.activeElement===e;t.has(e)&&(this.removeEvents(),Object.keys(s).filter((e=>s[e].destroy())),t.remove(e),i&&e.focus())}enable(){this.element.disabled&&(this.element.disabled=!1,this.update())}disable(){this.element.disabled||(this.element.disabled=!0,this.abort(),this.close(),this.update())}update(){const{disabled:e,value:t}=this.element,{clearable:s,loader:i}=this.options,n=i&&!e&&!0===this.loading,o=s&&!n&&!e&&t.length>0;this.components.Clear[o?"append":"remove"](),this.components.Loader[n?"append":"remove"]()}open(){!this.opened&&this.items.length&&(this.components.Message.set("open"),this.components.Input.expand(),this.components.Menu.append(),this.opened=!0,this.emitEvent("onOpen"))}close(){this.opened&&(this.components.Input.collapse(),this.components.Menu.remove(),this.opened=!1,this.emitEvent("onClose"))}clear(){const{autoSearch:e,minLength:t}=this.options,s=document.activeElement===this.element;""!==this.element.value&&(this.element.value="",this.components.Message.set("clear"),this.emitEvent("onClear"),this.abort(),s&&e&&t<1?this.search():this.depopulate())}select(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=this.items[e];t&&this.opened&&(this.element.value=t.value,this.highlight(e,!1),this.emitEvent("onSelect",t),this.components.Message.set("select")),this.close(),this.update()}search(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const{source:t,minLength:s}=this.options,i="function"==typeof t?"load":"response";this.abort(),e.replace(/^\s+/,"").length<s?this.depopulate():(this.loading=!0,this.emitEvent("onSearch",e),this[i](e,t))}load(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.depopulate(),this.components.Message.set("loading"),this.emitEvent("source",e,this.response.bind(this,e))}abort(){this.loading&&(this.loading=!1,this.emitEvent("onAbort"))}response(e,t){!1!==this.loading&&(this.loading=!1,this.populate(e,t),this.items.length?this.open():(this.components.Message.set("noResults"),this.close()),this.update())}populate(e,t){this.index=this.options.autoFocus?0:null,this.items=this.Data.parse(e,t),this.components.List.populate(),this.components.List.focusItem()}depopulate(){this.close(),this.update(),this.populate()}highlight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.opened&&e!==this.index&&(this.components.List.blurItem(),this.index=function(e,t){return(t+e%t)%t}(e,this.items.length),this.components.List.focusItem(),this.components.Input.setDescendant(),t&&this.components.Menu.scroll(),this.emitEvent("onHighlight",this.items[this.index]))}complete(){if(!this.items.length)return;const{value:e}=this.element,{label:t}=this.items[0],s=e+t.substring(e.length-e.search(/\S/)),i=this.Data.normalize(t);this.Data.normalize(e)!==i&&this.Data.normalize(s)===i&&(this.element.value=s,this.element.setSelectionRange(e.length,s.length))}replace(){this.items.length&&(this.element.value=this.items[this.index].label,this.update())}}WP_Grid_Builder.vendors.autocomplete=(e,t)=>new g(e,t)})()})();