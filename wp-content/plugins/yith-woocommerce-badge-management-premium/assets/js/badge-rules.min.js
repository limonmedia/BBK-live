jQuery(function(a){var e=a(".post-php.post-type-ywcbm-badge-rule .page-title-action,.edit-php.post-type-ywcbm-badge-rule .page-title-action, .edit-php.post-type-ywcbm-badge-rule .yith-plugin-fw__list-table-blank-state__cta"),t=function(){var e=a(this),t=e.closest(".yith-plugin-fw-metabox-field-row").find(".description"),i=e.is(":valid")?"":"#ea0034";e.is("select")&&e.hasClass("enhanced")?e.parent().find(".select2-container").css({"border-color":i,"box-shadow":"none"}):e.css("border-color",i),t.css("color",i)};e.on("click",function(e){e.preventDefault(),yith.ui.modal({title:yithWcbmBadgeRules.addBadgeRuleModal.title,content:yithWcbmBadgeRules.addBadgeRuleModal.content,closeWhenClickingOnOverlay:!0,width:700})}),a(document).on("click",".yith-wcbm-add-association-rule",function(){var e=a(this),t=e.parent().find(".yith-wcbm-associations-badge-rules"),e=wp.template(e.parent().attr("id"));t.append(e({ruleID:Date.now()})),a(document).trigger("yith_fields_init")}),a(document).on("click",".yith-wcbm-remove-association-badge-rule",function(){a(this).parent().remove()}),a(document).on("change","#_schedule_dates_from",function(){a("#_schedule_dates_to").datepicker("option","minDate",a(this).val())}),a(document).on("click",".yith_wcbm_actions .yith-plugin-fw__action-button--delete-action a",function(e){e.preventDefault(),e.stopPropagation();var t=a(this).attr("href"),e=a(this).closest("tr").find("td.title a").html();yith.ui.confirm({title:yithWcbmBadgeRules.i18n.deleteBadgeRuleModal.title,message:yithWcbmBadgeRules.i18n.deleteBadgeRuleModal.message.replace("%s",e),confirmButtonType:"delete",confirmButton:yithWcbmBadgeRules.i18n.deleteBadgeRuleModal.confirmButton,closeAfterConfirm:!1,onConfirm:function(){window.location.href=t}})}),a(document).on("change",".column-yith_wcbm_actions .yith-wcbm-enable-badge-rule input",function(){var t=a(this),e=t.closest(".yith-plugin-fw-onoff-container"),i=e.data("badge-rule-id"),i={action:yithWcbmBadgeRules.actions.toggleRuleEnable,security:yithWcbmBadgeRules.security,rule_id:i,rule_enabled:t.prop("checked")?"yes":"no"};e.block({message:"",overlayCSS:{backgroundColor:"#FFFFFF",opacity:.8,cursor:"wait"}}),a.ajax({type:"POST",dataType:"json",data:i,url:yithWcbmBadgeRules.ajaxurl,success:function(e){e.success||t.prop("checked",!t.prop("checked"))},complete:function(){e.unblock()}})}),a(document).on("change keyup","#yith-wcbm-title, #_badge",t),a("#yith-wcbm-title, #_badge").on("invalid",t),e=a("#title"),t=a("#yith-wcbm-title"),e&&t&&t.val(e.val()),a("#_badge").attr("required","true"),a(".wc-enhanced-select").selectWoo()});