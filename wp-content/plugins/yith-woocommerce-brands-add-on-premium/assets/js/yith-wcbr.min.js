jQuery(function(w){w(".yith-wcbr-brand-filter").on("click",".yith-wcbr-brand-filters a",function(e){var i=w(this),t=i.parent().find("a"),a=i.data("toggle"),r=i.closest(".yith-wcbr-brand-filter"),n="yes"===r.data("has_more"),s=i.parents(".yith-wcbr-brand-filters-wrapper").next(),d=s.find("li"),o="all"===a?d:d.filter('[data-heading="'+a+'"]'),l=(l=window.location.href.match(/.*\/page\/([0-9]+).*/))?l[1]:1;e.preventDefault(),t.removeClass("active"),i.addClass("active"),n?w.ajax({beforeSend:function(){r.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){r.unblock()},data:{action:"yith_wcbr_brand_filter",filter:a,page:a&&"all"!==a?1:l,shortcode_args:r.data("shortcode_options"),nonce:yith_wcbr.nonce},method:"POST",success:function(e){w(e).find(".yith-wcbr-brands-list").find("li").length?r.html(w(e).html()):(s.fadeOut(500,function(){d.hide(),s.fadeIn(500)}),r.find(".yith-wcbr-brands-pagination").remove())},url:yith_wcbr.ajax_url}):s.fadeOut(500,function(){d.hide(),o.show(),s.fadeIn(500)})}),w(".yith-wcbr-brand-filter a.active").trigger("click");var e=function(){var h=w(window).outerWidth();w(".yith-wcbr-brand-thumbnail-carousel .swiper-container").each(function(){var e,i,t=w(this),a=t.get(0),r=t.data("direction"),n=h<480&&"vertical"!=r?yith_wcbr.slides_per_view_mobile:t.data("slidesperview"),s=t.data("autoplay"),d=t.data("loop"),o=t.parent().find(".yith-wcbr-button-prev").get(0),l=t.parent().find(".yith-wcbr-button-next").get(0),c=t.parent().find(".yith-wcbr-pagination").get(0);"vertical"==r&&(e=(t=t.find("ul.swiper-wrapper")).find("li"),i=0,e.each(function(){var e=w(this).outerHeight();i<e&&(i=e)}),t.outerHeight(i*n+15)),new Swiper(a,{slidesPerView:n,autoplay:"yes"===s&&{delay:yith_wcbr.thumbnail_carousel_time},loop:"yes"===d,direction:r,navigation:{nextEl:l,prevEl:o},pagination:{el:c,clickable:!0},paginationClickable:!0,watchSlidesVisibility:!0,breakpoints:{320:{slidesPerView:2<n?2:n},480:{slidesPerView:3<n?3:n},600:{slidesPerView:4<n?4:n},1200:{slidesPerView:n}},on:{init:function(){w(this.slides).filter(".swiper-slide-visible").removeClass("last").last().addClass("last")},transitionStart:function(){w(this.slides).filter(".swiper-slide-visible").removeClass("last").last().addClass("last")}}})})},e=(e(),w(window).on("resize",e),function(){var b=w(window).outerWidth();w(".yith-wcbr-product-carousel .swiper-container").each(function(){var e,i,t,a=w(this),r=a.get(0),n=a.data("direction"),s=b<480&&"vertical"!=n?yith_wcbr.slides_per_view_mobile:a.data("slidesperview"),d=a.data("autoplay"),o=a.data("loop"),l=a.parent().find(".yith-wcbr-button-prev"),c=a.parent().find(".yith-wcbr-button-next"),h=a.parent().find(".yith-wcbr-pagination");"vertical"==n&&(i=(e=a.find("ul.swiper-wrapper")).find("li"),t=0,i.each(function(){var e=w(this).outerHeight();t<e&&(t=e)}),e.outerHeight(t*s+15)),a.find(".swiper-wrapper").parent().is(".yit-wcan-container")&&a.find(".swiper-wrapper").unwrap(),new Swiper(r,{slidesPerView:s,direction:n,autoplay:"yes"===d&&{delay:1500},loop:"yes"===o,navigation:{nextEl:c,prevEl:l},pagination:{el:h,clickable:!0},paginationClickable:!0,watchSlidesVisibility:!0,breakpoints:{320:{slidesPerView:2<s?2:s},480:{slidesPerView:3<s?3:s},600:{slidesPerView:4<s?4:s},1200:{slidesPerView:s}},onInit:function(e){e.slides.filter(".swiper-slide-visible").removeClass("last").last().addClass("last")},onTransitionStart:function(e){e.slides.filter(".swiper-slide-visible").removeClass("last").last().addClass("last")}})})});function i(e,i,t){t=wp.shortcode.attrs(t);return"undefined"!=typeof t.named.autosense_category&&("yes"===t.named.autosense_category?e.autosense_category=!0:"no"===t.named.autosense_category&&(e.autosense_category=!1)),"undefined"!=typeof t.named.autosense_brand&&("yes"===t.named.autosense_brand?e.autosense_brand=!0:"no"===t.named.autosense_brand&&(e.autosense_brand=!1)),e}e(),w(window).on("resize",e),w(document).on("yith-wcan-wrapped",e),w(".yith-wcbr-brand-select select").select2().on("change",function(e){var e=w(e.currentTarget),i=e.val(),i=e.find('option[value="'+i+'"]').data("href");void 0!==i&&(window.location=i)}),w(".yith-wcbr-brand-grid select.yith-wcbr-category-dropdown").select2().on("change",function(e){var i=w(this),n=w(e.currentTarget).val(),t=i.parents(".yith-wcbr-brand-grid").find(".yith-wcbr-brands-list"),a=t.find("li");t.fadeOut(500,function(){a.each(function(){var e=w(this),i=e.data("categories"),t=e.parents(".yith-wcbr-same-heading-box"),a=!1,r=!1;0==n&&(e.removeClass("hidden").show(),r=!0),r||((a=-1<w.inArray(n+"",i)?!0:a)?e.removeClass("hidden").show():e.addClass("hidden").hide()),0==t.find("li").not(".hidden").length?t.hide():t.show()}),t.fadeIn(500)})}).trigger("change"),w(".yith-wcbr-brand-grid .yith-wcbr-brand-filters").on("click","a",function(e){var s=w(this),i=s.parent().find("a"),t=i.filter(".reset"),a=s.parents(".yith-wcbr-brand-grid").find(".yith-wcbr-brands-list"),r=a.find("li"),d=[];if(e.preventDefault(),s.is(".reset"))i.removeClass("active"),s.addClass("active");else if(s.is(".active")){if(1==i.filter(".active").length)return;s.removeClass("active")}else t.removeClass("active"),s.addClass("active");i.filter(".active").each(function(){var e=w(this);d.push(e.data("term_id"))}),a.fadeOut(500,function(){r.each(function(){var e=w(this),i=e.data("categories"),t=e.parents(".yith-wcbr-same-heading-box"),a=!1,r=!1;if(s.is(".reset")&&(e.removeClass("hidden").show(),r=!0),!r){for(var n in d)if(-1<w.inArray(d[n]+"",i)){a=!0;break}a?e.removeClass("hidden").show():e.addClass("hidden").hide()}0==t.find("li").not(".hidden").length?t.hide():t.show()}),a.fadeIn(500)})}),w(".yith-wcbr-brand-grid .yith-wcbr-brand-scroll").on("click","a",function(e){var i=w(this),t=i.data("toggle"),i=i.parents(".yith-wcbr-brand-grid");e.preventDefault(),0<i.find('.yith-wcbr-same-heading-box[data-heading="'+t+'"]:visible').length&&w("html, body").animate({scrollTop:i.find('.yith-wcbr-same-heading-box[data-heading="'+t+'"]:visible').offset().top},"slow")}),wp.hooks.addFilter("blocks.getBlockAttributes","yith/yith-wcbr-brand-filter",i),wp.hooks.addFilter("blocks.getBlockAttributes","yith/yith-wcbr-brand-thumbnail",i),wp.hooks.addFilter("blocks.getBlockAttributes","yith/yith-wcbr-brand-thumbnail-carousel",i),wp.hooks.addFilter("blocks.getBlockAttributes","yith/yith-wcbr-brand-product",i),wp.hooks.addFilter("blocks.getBlockAttributes","yith/yith-wcbr-brand-product-carousel",i),wp.hooks.addFilter("blocks.getBlockAttributes","yith/yith-wcbr-brand-select",i),wp.hooks.addFilter("blocks.getBlockAttributes","yith/yith-wcbr-brand-list",i),wp.hooks.addFilter("blocks.getBlockAttributes","yith/yith-wcbr-brand-grid",i)});