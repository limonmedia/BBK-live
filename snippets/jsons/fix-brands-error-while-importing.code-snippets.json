{"generator":"Code Snippets v3.6.8","date_created":"2025-06-13 05:53","snippets":[{"id":54,"name":"Fix brands error while importing","code":"add_action('plugins_loaded', function() {\n    if (!class_exists('WC_Brands_Admin')) {\n        return;\n    }\n\n    \/\/ Lag en ny metode som erstatter den som gir feil\n    remove_all_actions('woocommerce_product_import_inserted_product_object', 10);\n\n    add_filter('woocommerce_product_import_inserted_product_object', function($product, $data) {\n        if (!empty($data['brands'])) {\n            $raw_brands = $data['brands'];\n\n            \/\/ H\u00e5ndter b\u00e5de array og streng\n            $brands = is_array($raw_brands) ? $raw_brands : explode(',', $raw_brands);\n\n            \/\/ Fjern mellomrom og tomme elementer\n            $brands = array_filter(array_map('trim', $brands));\n\n            \/\/ Sett merker (brands) p\u00e5 produktet\n            if (!empty($brands)) {\n                wp_set_object_terms($product->get_id(), $brands, 'product_brand');\n            }\n        }\n\n        return $product;\n    }, 10, 2);\n});\n","active":true,"modified":"2025-05-25 13:11:51","revision":"3"}]}