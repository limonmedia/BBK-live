{"generator":"Code Snippets v3.6.8","date_created":"2025-06-13 05:54","snippets":[{"id":66,"name":"Heading + Product Count on Add to cart","code":"function modify_elementor_menu_cart() {\n    ?>\n    <script>\n        jQuery(document).ready(function($) {\n            function addCustomElements() {\n                if (!$('.custom-cart-header').length) {\n                    let counts = getProductAndVariationCounts();\n                    let customHeader = $('<div class=\"custom-cart-header\"><\/div>');\n                    let headingText = buildHeadingText(counts);\n                    \n                    let heading = $('<p class=\"custom-cart-heading\">' + headingText + '<\/p>');\n                    let closeButton = $('.elementor-menu-cart__close-button').first();\n                    customHeader.append(heading).append(closeButton);\n                    $('.elementor-menu-cart__main').prepend(customHeader);\n                }\n                $('.elementor-button--checkout .cart-checkout-btn').text('FORTSETT TIL KASSEN');\n            }\n            \n            function getProductAndVariationCounts() {\n                const productCount = document.querySelectorAll('.elementor-menu-cart__product').length || 0;\n                \n                let totalVariations = 0;\n                $('.mini-cart-qty').each(function() {\n                    totalVariations += parseInt($(this).val()) || 1;\n                });\n                \n                if (totalVariations === 0) {\n                    totalVariations = productCount;\n                }\n                \n                return {\n                    products: productCount,\n                    variations: totalVariations\n                };\n            }\n            \n            function buildHeadingText(counts) {\n                let headingText = 'Handlekurv';\n                \n                if (counts.products > 0) {\n                    let productText = counts.products === 1 ? 'produkt' : 'produkter';\n                  \n                    \n                    if (counts.products !== counts.variations) {\n                        headingText += ` <span class=\"cart-count\">(${counts.variations} ${productText})<\/span>`;\n                    } else {\n                        headingText += ` <span class=\"cart-count\">(${counts.products} ${productText})<\/span>`;\n                    }\n                }\n                \n                return headingText;\n            }\n            \n            function updateProductCount() {\n                const counts = getProductAndVariationCounts();\n                const headingText = buildHeadingText(counts);\n                $('.custom-cart-heading').html(headingText);\n                \n\/\/                 console.log('Product count: ' + counts.products + ', Total variations: ' + counts.variations);\n            }\n\t\t\t\n            $(document).on('wc_fragments_refreshed wc_fragments_loaded added_to_cart removed_from_cart updated_cart_totals', function(event) {\n\/\/                 console.log('Header cart event: ' + event.type);\n                addCustomElements();\n                updateProductCount();\n            });\n            \n            $(document).on('change', '.mini-cart-qty', function() {\n                updateProductCount();\n            });\n            \n            addCustomElements();\n            updateProductCount();\n        });\n    <\/script>\n    <?php\n}\nadd_action('wp_footer', 'modify_elementor_menu_cart');","active":true,"modified":"2025-06-06 21:02:02","revision":"2"}]}