{"generator":"Code Snippets v3.6.8","date_created":"2025-06-13 05:51","snippets":[{"id":18,"name":"qty on mini cart","code":"\nadd_action( 'wp_footer', function() {\n    ?>\n    <style>\n\t\t.woo-variation-swatches.wvs-behavior-hide .variable-items-wrapper .variable-item.disabled {\n\t\t\tdisplay: none !important\n\t\t}\n\t\tspan.haji {\n\t\t\tdisplay: none !important\n\t\t}\n\t\t#woosq-popup .single-product .variations {\n\t\t\tdisplay: block !important\n\t\t}\n\t\t.woocommerce-variation .woocommerce-variation-description {\n\t\t\tdisplay: none !important\n\t\t}\n\t\t.berocket_better_labels.berocket_better_labels_image {\n\t\t\tz-index: 1\n\t\t}\n\t\tdiv[data-id=\"cfcf029\"]{\n\t\t\tmargin-bottom: -10px !important\n\t\t}\n\t\t.wpgb-result-count {\n\t\t\tcolor: #000;\n\t\t\tfont-weight: 500\n\t\t}\n\t\t\n\t\t.woosq-sidebar .woosq-product > .product > div {\n\t\t\tmax-height: 360px\n\t\t}\n\n\t\t.woosq-product .thumbnails img {\n\t\t\tmax-height: 360px\n\t\t}\n\n\t\t.woosq-sidebar .variatform.cart {\n\t\t\tmargin-bottom: unset;\n\t\t}\n\t\t\n\t\t.woosq-sidebar h1.product_title.entry-title {\n\t\t\ttext-align: left\n\t\t}\n\n\n\t\t@media screen and (max-width: 1023px) {\n\t\t\t.woosq-product .thumbnails img {\n\t\t\t\tmax-height: 250px;\n\t\t\t\tmargin: 0;\n\t\t\t}\n\t\t}\n\t\t\n\t\t.elementor-75199 .elementor-element.elementor-element-2154bc04 {\n\t\t\tpadding: 0 6% 12% 6% !important\n\t\t}\n\n\t\t@media screen and (max-width: 1023px) {\n\t\t\t.woosq-product .thumbnails img {\n\t\t\t\tmax-height: 250px;\n\t\t\t\tmargin: 0;\n\t\t\t}\n\t\t\t\n\t\t\t.elementor-75199 .elementor-element.elementor-element-2154bc04 {\n\t\t\t\tpadding: 6% 6% 12% 6% !important\n\t\t\t}\n\t\t}\n\t\t\n\t\t.dialog-widget-content {\n\t\t\tz-index: 999999999 !important;\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t.wpgb-apply {\n\t\t\tbackground-color: #36A9E1 !important;\n\t\t\tpadding: 12px 0 !important;\n\t\t\ttext-align: center !important;\n\t\t}\n\t\t\n\t\t\n        .mini-cart-qty-wrapper {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-size: 20px;\n    margin-top: 2px; \n    gap: 12px; \n}\n\t\t\n\n.mini-cart-stock {\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    color: #198754;\n    font-size: 12px;\n    font-weight: 500;\n    white-space: nowrap; \n\t\n}\n\n.mini-cart-stock svg {\n    width: 18px;\n    height: 18px;\n    fill: #198754;\n}\n\t\t.mini-cart-stock {\n  color: black;\n}\n\n.mini-cart-stock svg {\n  fill: #198754; \/* re-apply the green color to SVG to override inherited text color *\/\n  color: inherit; \/* optional if the SVG uses 'fill' *\/\n}\n\n\n.mini-cart-qty {\n    padding: 6px 10px;\n\t border: none !important;\n    border-radius: 6px;\n    background: #f6f6f6;\n    font-size: 14px;\n\tcolor:rgb(39, 39, 39);\n    min-width: 85px;\n\t    right: 0;\n\tbottom:15%;\n    position: absolute;\n    flex-shrink: 0; \n\t\t transition: box-shadow 0.2s ease;\n}\n.mini-cart-qty:focus {\n  border: 1px solid #0d6efd; \n  outline: none;\n  box-shadow: 0 0 0 2px #0d6efd; \n\t \n}\n@media (max-width: 768px) {\n\t\t.mini-cart-qty {\n\t\t    right: 2%;\n\t\t\twidth:10% !important;\n    min-width: 60px !important;\n\t\t}\n\t\t}\n     \n    <\/style>\n    <script>\n        document.addEventListener('DOMContentLoaded', function () {\n            jQuery(document).on('change', '.mini-cart-qty', function () {\n                var quantity = jQuery(this).val();\n                var cart_item_key = jQuery(this).data('cart-key');\n\n                jQuery.post('<?php echo admin_url( \"admin-ajax.php\" ); ?>', {\n                    action: 'update_cart_quantity',\n                    quantity: quantity,\n                    cart_item_key: cart_item_key\n                }, function (response) {\n                    if (response.success && response.data.fragments) {\n                        jQuery.each(response.data.fragments, function (selector, content) {\n                            jQuery(selector).html(content);\n                        });\n                    }\n                });\n            });\n        });\n    <\/script>\n    <?php\n});\n\n\/\/ === Add Quantity Dropdown in Mini Cart Items ===\nadd_filter( 'woocommerce_widget_cart_item_quantity', function( $html, $cart_item, $cart_item_key ) {\n    $product = $cart_item['data'];\n    $max_qty = $product->get_stock_quantity();\n    $current_qty = $cart_item['quantity'];\n\n    if ( $product->is_sold_individually() || ! $product->managing_stock() ) {\n        return $html;\n    }\n $default_quantity_html = $html;\n    $select = '<select class=\"mini-cart-qty\" data-cart-key=\"' . esc_attr( $cart_item_key ) . '\">';\n    for ( $i = 1; $i <= $max_qty; $i++ ) {\n        $selected = $i == $current_qty ? 'selected' : '';\n        $select .= \"<option value='{$i}' {$selected}>{$i}<\/option>\";\n    }\n    $select .= '<\/select>';\n\n    $stock_icon = '<svg class=\"custom-archive-icon\" xmlns=\"http:\/\/www.w3.org\/2000\/svg\" viewBox=\"0 0 18 16\" width=\"18\" height=\"18\" fill=\"#198754\" aria-hidden=\"true\">\n  <path d=\"M15.4.5H2.6C1.43.5.48 1.53.48 2.79v3.05h.708v10.7h15.6V5.84h.708V2.79c0-1.26-.953-2.29-2.12-2.29zm0 14.5H2.6V5.86h12.8V15zm.708-10.7h-14.2V2.78c0-.419.317-.762.708-.762h12.8c.391 0 .708.341.708.762V4.3z\"><\/path>\n<\/svg>';\n\n\n\n\treturn $html . '<div class=\"mini-cart-qty-wrapper\">\n                    \n                    ' . $select . '\n                <\/div>';\n\n\n}, 10, 3 );\n\n\/\/ === Handle Ajax Cart Quantity Update ===\nif ( ! function_exists( 'update_cart_quantity' ) ) {\n    add_action( 'wp_ajax_update_cart_quantity', 'update_cart_quantity' );\n    add_action( 'wp_ajax_nopriv_update_cart_quantity', 'update_cart_quantity' );\n\n    function update_cart_quantity() {\n        $cart_item_key = sanitize_text_field( $_POST['cart_item_key'] ?? '' );\n        $quantity = intval( $_POST['quantity'] ?? 1 );\n\n        foreach ( WC()->cart->get_cart() as $key => $item ) {\n            if ( $key === $cart_item_key ) {\n                WC()->cart->set_quantity( $cart_item_key, $quantity, true );\n                break;\n            }\n        }\n\n        WC()->cart->calculate_totals();\n        WC()->cart->maybe_set_cart_cookies();\n\n        ob_start();\n        woocommerce_mini_cart();\n        $mini_cart = ob_get_clean();\n\n        wp_send_json_success( [\n            'fragments' => [ 'div.widget_shopping_cart_content' => $mini_cart ]\n        ] );\n    }\n}\n","active":true,"modified":"2025-06-11 21:19:41","revision":"173"}]}