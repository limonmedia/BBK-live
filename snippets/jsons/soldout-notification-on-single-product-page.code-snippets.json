{"generator":"Code Snippets v3.6.8","date_created":"2025-06-13 05:52","snippets":[{"id":47,"name":"soldout notification on single product page","code":"\nadd_filter('woocommerce_add_error', function ($error) {\n \n        return 'Du har allerede den siste tilgjengelige i handlekurven';\n\n    return $error;\n});\n\n\/\/ Add custom notification to footer\nadd_action('wp_footer', function () {\n    ?>\n    <style>\n        #custom-notify {\n            display: none;\n            position: fixed !important;\n            top: 34% !important;\n            right: 20px !important;\n            background-color: #d20a11 !important;\n            color: #fff !important;\n            padding: 10px 10px !important;\n            border-radius: 10px !important;\n            font-family: Barlow, sans-serif !important;\n            font-size: 14px !important;\n            font-weight: 700 !important;\n            z-index: 99999 !important;\n            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2) !important;\n            max-width: 320px !important;\n            animation: slideIn 0.3s ease !important;\n            opacity: 1 !important;\n            visibility: visible !important;\n            transition: opacity 0.5s ease !important;\n\t\t\ttext-align: left !important; \/* Added this line *\/\n        }\n\n        #custom-notify.fade-out {\n            opacity: 0 !important;\n        }\n\n        #custom-notify .notify-text {\n            display: inline-block !important;\n            vertical-align: middle !important;\n            padding-right: 20px !important;\n        }\n\n        #custom-notify .close-notify {\n            position: absolute !important;\n            top: 4px !important;\n            right: 8px !important;\n            font-size: 22px !important;\n            font-weight: bold !important;\n            color: #fff !important;\n            cursor: pointer !important;\n            line-height: 1 !important;\n        }\n\n        #custom-notify .close-notify:hover {\n            color: #ddd !important;\n        }\n\n        @keyframes slideIn {\n            from {\n                opacity: 0;\n                transform: translateY(-20px);\n            }\n            to {\n                opacity: 1;\n                transform: translateY(0);\n            }\n        }\n\n        @media (max-width: 768px) {\n            #custom-notify {\n                top: 28% !important;\n                width: 150px !important;\n            }\n        }\n\n        \/* Hide default WooCommerce notices *\/\n        .woocommerce-notices-wrapper,\n        .woocommerce-error,\n        .woocommerce-message,\n        .woocommerce-info {\n            display: none !important;\n        }\n    <\/style>\n\n    <script>\n        (function () {\n            \/\/ Create custom notification box\n            const notifyBox = document.createElement('div');\n            notifyBox.id = 'custom-notify';\n            document.body.appendChild(notifyBox);\n\n            \/\/ Create text container\n            const textContainer = document.createElement('span');\n            textContainer.className = 'notify-text';\n            notifyBox.appendChild(textContainer);\n\n            \/\/ Create close button\n            const closeButton = document.createElement('span');\n            closeButton.className = 'close-notify';\n            closeButton.innerHTML = '\u00d7';\n            notifyBox.appendChild(closeButton);\n\n            \/\/ Function to show custom notification\n            let notificationTimeout;\n            const showNotification = (message) => {\n                clearTimeout(notificationTimeout);\n                textContainer.textContent = message;\n                setTimeout(() => {\n                    notifyBox.style.display = 'block';\n                    notifyBox.classList.remove('fade-out');\n                    notificationTimeout = setTimeout(() => {\n                        notifyBox.classList.add('fade-out');\n                        setTimeout(() => {\n                            notifyBox.style.display = 'none';\n                            notifyBox.classList.remove('fade-out');\n\t\t\t\t\t\t\tdocument.querySelectorAll('.notiny-container').forEach(function(el) {\n    el.style.setProperty('display', 'none', 'important');\n    el.style.setProperty('visibility', 'hidden', 'important');\n    el.style.setProperty('opacity', '0', 'important');\n});\n                        }, 500);\n                    }, 10000);\n                }, 100);\n            };\n\n            \/\/ Close button click handler\n            closeButton.addEventListener('click', () => {\n                notifyBox.classList.add('fade-out');\n                setTimeout(() => {\n                    notifyBox.style.display = 'none';\n                    notifyBox.classList.remove('fade-out');\n                }, 500);\n            });\n\n            \/\/ Handle WooCommerce error notices only\n            const checkNotices = () => {\n                const noticeSelectors = [\n                    '.woocommerce-notices-wrapper .woocommerce-error',\n                    '.woocommerce-error'\n                ];\n                const notices = document.querySelectorAll(noticeSelectors.join(', '));\n                notices.forEach((notice) => {\n                    const message = notice.innerText.trim();\n                    if (message) {\n                        showNotification(message);\n\/\/                         notice.remove();\n\t\t\t\t\t\tsetTimeout(() => notice.remove(), 50);\n\t\t\t\t\t\t\n                    }\n                });\n            };\n\n            \/\/ MutationObserver for dynamic notices\n            const noticesWrapper = document.querySelector('.woocommerce-notices-wrapper');\n            if (noticesWrapper) {\n                const observer = new MutationObserver(checkNotices);\n                observer.observe(noticesWrapper, {\n                    childList: true,\n                    subtree: true,\n                    characterData: true\n                });\n            }\n\n            \/\/ Fallback: Poll for notices every 500ms\n            setInterval(checkNotices, 500);\n\n            \/\/ Handle WooCommerce AJAX events\n            document.body.addEventListener('added_to_cart', checkNotices);\n            document.body.addEventListener('updated_cart_totals', checkNotices);\n        })();\n    <\/script>\n    <?php\n});\n","active":true,"modified":"2025-06-08 07:42:41","revision":"213"}]}